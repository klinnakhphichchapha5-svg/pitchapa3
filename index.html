<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏ã‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏î‡∏π‡πÅ‡∏•‡∏™‡∏ß‡∏ô</title>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<style>
body {
  font-family: "Prompt", sans-serif;
  background: #eef7ee;
}
.card {
  max-width: 420px;
  margin: 40px auto;
  background: #fff;
  padding: 20px;
  border-radius: 16px;
}
h1 {
  text-align: center;
  color: #2e7d32;
}
.box {
  background: #f1f8e9;
  padding: 12px;
  margin: 10px 0;
  border-radius: 8px;
}
button {
  width: 100%;
  padding: 12px;
  margin-top: 8px;
  border: none;
  border-radius: 8px;
  font-size: 16px;
  cursor: pointer;
}
.auto { background: #4caf50; color: #fff; }
.on { background: #f44336; color: #fff; }
.off { background: #9e9e9e; color: #fff; }
</style>
</head>

<body>
<div class="card">
<h1>üå± ‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏ã‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏î‡∏π‡πÅ‡∏•‡∏™‡∏ß‡∏ô</h1>

<div class="box">üå° ‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥: <span id="temp">-</span> ¬∞C</div>
<div class="box">üíß ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏∑‡πâ‡∏ô‡∏î‡∏¥‡∏ô: <span id="soil">-</span> %</div>
<div class="box">üìè ‡∏£‡∏∞‡∏¢‡∏∞‡∏ô‡πâ‡∏≥: <span id="dist">-</span> cm</div>
<div class="box">üîî ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ö‡∏±‡∏ã‡πÄ‡∏ã‡∏≠‡∏£‡πå: <span id="buzz">‡∏£‡∏≠‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</span></div>

<button class="auto" onclick="setAuto()">‡πÇ‡∏´‡∏°‡∏î‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥</button>
<button class="on" onclick="setOn()">‡πÄ‡∏õ‡∏¥‡∏î‡∏ö‡∏±‡∏ã‡πÄ‡∏ã‡∏≠‡∏£‡πå</button>
<button class="off" onclick="setOff()">‡∏õ‡∏¥‡∏î‡∏ö‡∏±‡∏ã‡πÄ‡∏ã‡∏≠‡∏£‡πå</button>
</div>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyCKjRcHVMlXh7cU0Pc3IdusyvNHQVlv888",
  databaseURL: "https://pitchapa1-default-rtdb.firebaseio.com/"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.database();

db.ref("sensor").on("value", s => {
  if (!s.exists()) return;
  document.getElementById("temp").innerText = s.val().temperature;
  document.getElementById("soil").innerText = s.val().soil;
  document.getElementById("dist").innerText = s.val().distance;
});

db.ref("buzzer").on("value", s => {
  if (!s.exists()) return;
  const m = s.val().mode;
  const v = s.val().value;
  document.getElementById("buzz").innerText =
    m === "auto" ? "‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥" : (v ? "‡πÄ‡∏õ‡∏¥‡∏î" : "‡∏õ‡∏¥‡∏î");
});

function setAuto() {
  db.ref("buzzer").set({ mode: "auto", value: 0 });
}
function setOn() {
  db.ref("buzzer").set({ mode: "manual", value: 1 });
}
function setOff() {
  db.ref("buzzer").set({ mode: "manual", value: 0 });
}
</script>
</body>
</html>
